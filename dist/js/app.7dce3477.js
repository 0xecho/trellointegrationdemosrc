(function(t){function e(e){for(var n,i,l=e[0],s=e[1],c=e[2],u=0,f=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,l=1;l<o.length;l++){var s=o[l];0!==a[s]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},a={app:0},r=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="TrelloIntegrationdemo/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=s;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"0ab0":function(t,e,o){"use strict";o("c432")},"16c0":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[o("div",{staticClass:"d-flex align-center"},[o("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Trello Logo",contain:"","min-width":"100",src:"https://1000logos.net/wp-content/uploads/2021/05/Trello-logo-500x281.png",width:"100"}})],1),o("v-spacer"),o("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,transition:"scale-transition",origin:"top right",value:t.selectBoardVisible},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({attrs:{slot:"activator",color:"primary",dark:"",text:""},slot:"activator"},n),[o("span",{staticClass:"white--text"},[o("v-icon",[t._v("mdi-account")]),t._v(" Select Board ")],1)])]}}])},[o("SelectBoard",{on:{"close-dialog":t.closeDialog}})],1),o("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,transition:"scale-transition",origin:"top right"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({attrs:{slot:"activator",color:"primary",dark:"",text:""},slot:"activator"},n),[o("span",{staticClass:"white--text"},[o("v-icon",[t._v("mdi-account")]),t._v(" Link to Trello ")],1)])]}}])},[o("LinkToTrello")],1),t.user.id?[t._v(" Linked to: Â  "),o("span",{staticClass:"white--text"},[t._v(" "+t._s(t.user.name)+" ")])]:t._e()],2),o("v-main",[o("br"),o("div",{staticStyle:{"margin-right":"30px"}},[o("v-row",{attrs:{cols:"12",justify:"end"}},[o("v-col",{staticStyle:{color:"#000"},attrs:{cols:"7"}},[o("Board",{attrs:{cards:t.cards},on:{remove:t.removeCard}})],1),o("v-col",{staticStyle:{color:"#000"},attrs:{cols:"3"}},[o("div",[o("Issues",{on:{"add-to-canvas":t.addToCanvas}})],1)])],1)],1)])],1)},r=[],i=(o("d3b7"),o("99af"),o("b0c0"),o("4de4"),o("25f0"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Select Board")])]),o("v-card-text",[o("v-select",{attrs:{items:t.organizations,label:"Organization","item-text":"name","item-value":"id"},on:{change:t.fetchBoards},model:{value:t.selectedOrganization,callback:function(e){t.selectedOrganization=e},expression:"selectedOrganization"}})],1),o("v-card-text",[o("v-select",{attrs:{items:t.boards,disabled:null===t.selectedOrganization,label:"Board","item-text":"name","item-value":"id"},model:{value:t.selectedBoard,callback:function(e){t.selectedBoard=e},expression:"selectedBoard"}})],1),o("v-card-actions",[o("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.select}},[t._v(" "+t._s(t.buttonText)+" ")])],1)],1)],1)}),l=[],s=(o("e9c4"),{data:function(){return{selectedOrganization:null,selectedBoard:null,organizations:[],boards:[],buttonText:"Select"}},methods:{fetchBoards:function(){var t=this,e=localStorage.getItem("userId"),o=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/boards?userId="+e+"&sketchId="+o+"&organizationId="+this.selectedOrganization).then((function(t){return t.json()})).then((function(e){console.log(e);try{"failed"==e.status?console.log("failed"):t.boards=e}catch(o){t.boards=e}}))},fetchOrganizations:function(){var t=this,e=localStorage.getItem("userId"),o=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/organizations?userId="+e+"&sketchId="+o).then((function(t){return t.json()})).then((function(e){console.log(e);try{"failed"==e.status?console.log("failed"):t.organizations=e}catch(o){t.organizations=e}}))},select:function(){var t=this,e=localStorage.getItem("userId"),o=localStorage.getItem("sketchId");this.buttonText="Loading...",fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/boards/select?userId="+e+"&sketchId="+o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({boardId:this.selectedBoard})}).then((function(t){return t.json()})).then((function(e){console.log(e),localStorage.setItem("boardId",t.selectedBoard),localStorage.setItem("organizationId",t.selectedOrganization),t.buttonText="Selected"})).catch((function(e){console.log(e),t.buttonText="Error"}))}},mounted:function(){this.fetchOrganizations()}}),c=s,d=o("2877"),u=o("6544"),f=o.n(u),v=o("8336"),h=o("b0af"),m=o("99d9"),p=o("b974"),g=Object(d["a"])(c,i,l,!1,null,null,null),b=g.exports;f()(g,{VBtn:v["a"],VCard:h["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VSelect:p["a"]});var I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Authorize Trello")])]),o("v-card-text",[o("p",[o("span",{staticClass:"grey--text"},[t._v(" You need to authorize Trello to access your boards. ")])])]),o("v-card-actions",[o("v-btn",{attrs:{color:"primary",dark:"",href:t.trelloAuthUrl}},[t._v(" Authorize Trello ")])],1)],1)],1)},k=[],_={name:"LinkToTrello",data:function(){return{trelloAPIKey:"d61396d6f8b46b6f2e883932d79835eb",trelloAppName:"Trello Fl0 Integration",trelloReturnUrl:window.location.origin+"/trello-callback"}},computed:{trelloAuthUrl:function(){return"https://trello.com/1/authorize?key=".concat(this.trelloAPIKey,"&name=").concat(this.trelloAppName,"&expiration=never&response_type=token&scope=read,write&return_url=").concat(this.trelloReturnUrl)}}},S=_,y=Object(d["a"])(S,I,k,!1,null,null,null),T=y.exports;f()(y,{VBtn:v["a"],VCard:h["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"]});var w=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-card",{attrs:{color:"#fffee8",flat:"",tile:"",elevation:"2"}},[o("v-card-title",[t._v(" Trello Issues ")]),o("hr"),o("v-list",t._l(t.issues,(function(e,n){return o("v-list-item",{key:n},[o("v-list-item-content",[o("v-list-item-title",[t._v(" "+t._s(e.name)+" ")]),o("v-btn",{attrs:{color:"primary",dark:"",small:""},on:{click:function(o){return t.addToCanvas(e)}}},[o("v-icon",[t._v("mdi-plus")]),t._v(" Add to canvas ")],1)],1)],1)})),1)],1)],1)},V=[],x={name:"Issues",data:function(){return{issues:[]}},methods:{fetchIssues:function(){var t=this,e=localStorage.getItem("userId"),o=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/issues?userId="+e+"&sketchId="+o).then((function(t){return t.json()})).then((function(e){console.log(e);try{"failed"==e.status?console.log("failed"):t.issues=e}catch(o){t.issues=e}}))},addToCanvas:function(t){this.$emit("add-to-canvas",t)}},mounted:function(){this.fetchIssues()}},O=x,C=o("132d"),B=o("8860"),z=o("da13"),j=o("5d23"),A=Object(d["a"])(O,w,V,!1,null,null,null),E=A.exports;f()(A,{VBtn:v["a"],VCard:h["a"],VCardTitle:m["c"],VIcon:C["a"],VList:B["a"],VListItem:z["a"],VListItemContent:j["a"],VListItemTitle:j["b"]});var L=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"mainBoard"}},[t._l(t.cards,(function(e,n){return[o("Card",{key:e.id,attrs:{card:e,index:n},on:{remove:t.remove}})]}))],2)},M=[],P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Draggable",[o("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition",origin:"top right"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-card",t._g({staticClass:"card",attrs:{elevation:"2",flat:"",tile:"",color:"#fffee8"}},n),[o("v-card-text",[o("v-icon",[t._v("mdi-card-text-outline")]),t._v(" "+t._s(t.card.name)+" ")],1)],1)]}}])},[o("v-btn",{on:{click:t.createIssue}},[o("v-icon",[t._v("mdi-plus")]),t._v(" Create Issue ")],1),o("v-btn",{attrs:{color:"red"},on:{click:t.remove}},[o("v-icon",[t._v("mdi-minus")]),t._v(" Remove ")],1)],1)],1)},$=[],D=o("4750"),U={name:"Card",components:{Draggable:D["a"]},props:{card:{type:Object,required:!0}},methods:{createIssue:function(){var t=localStorage.getItem("userId"),e=localStorage.getItem("sketchId");fetch("https://portal.fl0.com/api/invision /DEV/Trello Integration/flows/issue?userId="+t+"&sketchId="+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(t){return t.json()})).then((function(t){console.log(t)})).error((function(t){console.log(t)}))},remove:function(){this.$emit("remove",this.card.id)}},mounted:function(){console.log(this.card)}},N=U,J=(o("0ab0"),o("e449")),R=Object(d["a"])(N,P,$,!1,null,null,null),q=R.exports;f()(R,{VBtn:v["a"],VCard:h["a"],VCardText:m["b"],VIcon:C["a"],VMenu:J["a"]});var K={name:"Board",components:{Card:q},props:{cards:{type:Array,required:!0}},methods:{remove:function(t){this.$emit("remove",t)}}},F=K,Y=(o("b2e8"),Object(d["a"])(F,L,M,!1,null,null,null)),G=Y.exports,H={name:"App",data:function(){return{trelloToken:"d61396d6f8b46b6f2e883932d79835eb",user:{id:"",name:"",avatar:""},sketchId:"",userId:"",selectBoardVisible:!1,cards:[]}},components:{SelectBoard:b,LinkToTrello:T,Issues:E,Board:G},methods:{getLinkedUser:function(){var t=this,e=localStorage.getItem("trelloToken");fetch("https://api.trello.com/1/members/me?key=".concat(this.trelloToken,"&token=").concat(e)).then((function(t){return t.json()})).then((function(e){t.user.id=e.id,t.user.name=e.fullName,t.user.avatar=e.avatarUrl}))},closeDialog:function(){console.log("close dialog"),this.selectBoardVisible=!1},addToCanvas:function(t){this.cards.push(t)},removeCard:function(t){this.cards=this.cards.filter((function(e){return e.id!=t}))}},mounted:function(){var t=localStorage.getItem("sketchId");t||(t=Math.random().toString(36),localStorage.setItem("sketchId",t));var e=localStorage.getItem("userId");e||(e=Math.random().toString(36),localStorage.setItem("userId",e)),this.sketchId=t,this.userId=e}},Q=H,W=o("7496"),X=o("40dc"),Z=o("62ad"),tt=o("adda"),et=o("f6c4"),ot=o("0fd9"),nt=o("2fa4"),at=Object(d["a"])(Q,a,r,!1,null,null,null),rt=at.exports;f()(at,{VApp:W["a"],VAppBar:X["a"],VBtn:v["a"],VCol:Z["a"],VIcon:C["a"],VImg:tt["a"],VMain:et["a"],VMenu:J["a"],VRow:ot["a"],VSpacer:nt["a"]});var it=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div")},lt=[],st=(o("ac1f"),o("1276"),{mounted:function(){var t=window.location.hash.substr(1).split("&")[0].split("=")[1],e=localStorage.getItem("sketchId"),o=localStorage.getItem("userId");e||(e=Math.random().toString(36),localStorage.setItem("sketchId",e)),o||(o=Math.random().toString(36),localStorage.setItem("userId",o)),fetch("https://api.fl0.com/invision%20/dev/trello%20integration/flows/register?sketchId="+e+"&userId="+o+"&token="+t).then((function(t){return t.json()})).then((function(t){console.log(t),window.location.href="/"})).error((function(t){console.log(t),window.location.href="/"}))}}),ct=st,dt=Object(d["a"])(ct,it,lt,!1,null,null,null),ut=dt.exports,ft=o("f309");n["default"].use(ft["a"]);var vt=new ft["a"]({}),ht=o("2f62");n["default"].use(ht["a"]);var mt=new ht["a"].Store({state:{selectedBoard:"",selectedOrganization:""},mutations:{setSelectedBoard:function(t,e){t.selectedBoard=e},setSelectedOrganization:function(t,e){t.selectedOrganization=e},setOrganizations:function(t,e){t.organizations=e},setBoards:function(t,e){t.boards=e}},actions:{selectBoard:function(t,e){var o=t.commit,n=e.board,a=e.organization;o("setSelectedBoard",n),o("setSelectedOrganization",a)}},modules:{}});n["default"].config.productionTip=!1,n["default"].directive("draggable",D["b"]),n["default"].component("Draggable",D["c"]),new n["default"]({vuetify:vt,computed:{ActiveView:function(){return console.log(window.location.pathname),"/trello-callback"==window.location.pathname?ut:rt}},store:mt,render:function(t){return t(this.ActiveView)}}).$mount("#app")},b2e8:function(t,e,o){"use strict";o("16c0")},c432:function(t,e,o){}});
//# sourceMappingURL=app.7dce3477.js.map